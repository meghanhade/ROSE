<!DOCTYPE html>
<html>
  <head>
    <link href='http://api.tiles.mapbox.com/mapbox.js/v1.2.0/mapbox.css' rel='stylesheet' />

    <script src='http://api.tiles.mapbox.com/mapbox.js/v1.2.0/mapbox.js'></script>
    <style>
      #map {
        height:800px;
        width: 1080px;
      }
    </style>
  </head>
  
  <body>
    <div id='map'></div><script type='text/javascript'>
      var r_text = [
        "Here there's a river that winds on forever"
    
      ];
    </script>
    
    <script type='text/javascript'>
      
      var map = L.mapbox.map('map', 'm365.map-e3lks16p', {
        gridLayer: {},
        gridControl: {
        sanitizer: function(x) { console.log(x); return x; }
        }
        })
        .setView([37.744657, -122.439365], 3);
        
      var marker = L.marker(new L.LatLng(44.9833, -93.2667), {
        icon: L.mapbox.marker.icon({'marker-color': 'CC0033'}),
        draggable: true
        });
        
      function updateMarker() {
        var t = Math.floor(r_text.length*Math.random())
        marker.bindPopup(r_text[t]);
        marker.addTo(map);
      }
      
      updateMarker();
      
      marker.on('dragend',updateMarker);

    </script>
  </body>
</html>
</html>
